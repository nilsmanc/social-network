"use strict";(self.webpackChunkreact_first=self.webpackChunkreact_first||[]).push([[478],{1478:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var n=r(885);var s=r(8204),a=r(1020),c=r(2791),u=r(364),i=r(7773),l="ChatPage_chat__NN2J9",o="ChatPage_message__uLtpb",h="ChatPage_avatar__b-NOH",d="ChatPage_name__SMtAh",f="ChatPage_text__Z66WE",v="ChatPage_textInput__t+pIs",x=r(184),m=function(){var e=(0,u.I0)(),t=(0,u.v9)((function(e){return e.chat.status}));return(0,c.useEffect)((function(){return e((0,i.WE)()),function(){e((0,i.R7)())}}),[]),(0,x.jsxs)("div",{children:["error"===t&&(0,x.jsx)("div",{children:"Some error occured. Please refresh the page"}),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g,{}),(0,x.jsx)(_,{})]})]})},g=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=(0,u.v9)((function(e){return e.chat.messages})),r=(0,c.useRef)(null),s=(0,c.useState)(!0),a=(0,n.Z)(s,2),i=a[0],o=a[1];return(0,c.useEffect)((function(){i&&null!==r.current&&r.current.scrollIntoView({behavior:"smooth"})}),[t]),(0,x.jsxs)("div",{className:l,onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300?!i&&o(!0):i&&o(!1)},children:[t.map((function(e,t){return(0,x.jsx)(j,{message:e},e.id)})),(0,x.jsx)("div",{ref:r})]})},j=c.memo((function(e){var t=e.message,r=s.Z.Text;return(0,x.jsxs)("div",{className:o,children:[(0,x.jsx)("img",{className:h,src:t.photo,style:{width:"30px"}}),(0,x.jsx)("div",{className:d,children:(0,x.jsx)(r,{strong:!0,children:t.userName})}),(0,x.jsx)("div",{className:f,children:t.message})]})})),_=function(){var e=(0,c.useState)(""),t=(0,n.Z)(e,2),r=t[0],s=t[1],l=(0,u.I0)(),o=(0,u.v9)((function(e){return e.chat.status}));return(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{children:(0,x.jsx)("textarea",{className:v,onChange:function(e){return s(e.currentTarget.value)},value:r})}),(0,x.jsx)("div",{children:(0,x.jsx)(a.Z,{htmlType:"submit",disabled:"ready"!==o,onClick:function(){r&&(l((0,i.bG)(r)),s(""))},children:"Send"})})]})},p=function(){return(0,x.jsx)("div",{children:(0,x.jsx)(m,{})})}}}]);
//# sourceMappingURL=478.ccac068b.chunk.js.map